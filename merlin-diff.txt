#MERLIN_TARGET="asuswrt-merlin-380.63_2"
#diff -u -r -B -X ./excludes.txt ./${MERLIN_TARGET}-original/ ./${MERLIN_TARGET}/ | grep -v "Only in ./${MERLIN_TARGET}" > merlin-diff.patch

#cd ~/asuswrt-merlin
#ed -s < ~/blackfuel/asuswrt-merlin-tools/asuswrt-merlin-target.patch
#patch --dry-run -p1 -i ~/blackfuel/asuswrt-merlin-tools/380.68-ARM-mods+apps+xtables-addons.patch
#patch --dry-run -p1 -i ~/blackfuel/asuswrt-merlin-tools/asuswrt-arm-entropy-backport-3.16.43.patch
#patch --dry-run -p1 -i ~/blackfuel/asuswrt-merlin-tools/380.66-ARM-squashfs-4K.patch
#patch --dry-run -p1 -i ~/blackfuel/asuswrt-merlin-tools/asuswrt-arm-uvc-enable.patch

#---
#cd $HOME/blackfuel
#diff -u -B -N -r -x *.rej -x *.orig -x .directory ./asuswrt-merlin/release/src/router/tor ./asuswrt-merlin-tor-diff/release/src/router/tor > $HOME/merlin-tor-diff.patch

#---
# strip file times, root folder names and diff comments
sed -r -i 's/^(---) ([^\/ ]*\/){2}(release\/[^ \t]*).*/\1 a\/\3/g;s/^(\+\+\+) ([^\/ ]*\/){2}(release\/[^ \t]*).*/\1 b\/\3/g;s/^diff .*//g' *.patch



